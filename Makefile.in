srcdir = @srcdir@
top_srcdir = @top_srcdir@
top_builddir = .
VPATH = @srcdir@
prefix = @prefix@
exec_prefix = @exec_prefix@
bindir = @bindir@
libdir = @libdir@
incdir = @includedir@

UN_VERSION=0
UN_REVISION=1
UN_AGE=0

LIBTOOL = @LIBTOOL@
CC = @CC@
INSTALL = @INSTALL@
INSTALL_DATA = @INSTALL_DATA@

WFLAGS = -Wmissing-prototypes -Wunused -Wimplicit -Wreturn-type -Wparentheses
CFLAGS = @CFLAGS@ $(WFLAGS)

both: libuninameslist.la libuninameslist-fr.la

libuninameslist.la: nameslist.lo
	$(LIBTOOL) $(CC) $(CFLAGS) -o libuninameslist.la nameslist.lo \
	    -rpath $(libdir) -version-info $(UN_VERSION):$(UN_REVISION):$(UN_AGE)

libuninameslist-fr.la: nameslist-fr.lo
	$(LIBTOOL) $(CC) $(CFLAGS) -o libuninameslist-fr.la nameslist-fr.lo \
	    -rpath $(libdir) -version-info $(UN_VERSION):$(UN_REVISION):$(UN_AGE)


%.lo: %.c
	$(LIBTOOL) $(CC) $(CFLAGS) -c $<

install: libuninameslist.la
# You may need to be root to do the install
	mkdir -p $(libdir)
	$(LIBTOOL) $(INSTALL) -c libuninameslist.la $(libdir)/libuninameslist.la
	$(LIBTOOL) --finish $(libdir)
	mkdir -p $(incdir)
	$(INSTALL_DATA) nameslist.h $(incdir)/uninameslist.h

clean:
	-rm -f *.lo *.o

distclean cleaner:
	-rm -f *.lo *.o libuninameslist.la Makefile


#nameslist.c nameslist-fr.c: buildnameslist NamesList.txt ListeDesNoms-4.0.0.txt
#	buildnameslist

buildnameslist: buildnameslist.c

NamesList.txt:
	wget http://www.unicode.org/Public/UNIDATA/NamesList.txt

ListeDesNoms-4.0.0.txt
	wget http://cooptel.qc.ca/~pandries/ListeDesNoms-4.0.0.txt
